import"./chunks/nprogress.CzrMhl4e.js";import{b as C,u as x}from"./app.BgXkHh06.js";import"./chunks/dayjs.Byk5cVHE.js";import{r as h}from"./ValaxyMain.vue_vue_type_script_setup_true_lang.DSasDLkp.js";import{U as w,z as v,S as g,aa as l,a8 as c,ac as r,av as k,ab as b,aw as _,as as A,ak as D,af as T,X as K,D as V,V as B}from"./framework.Ch-9ApjR.js";function S(o){const n=new TextEncoder;return window.crypto.subtle.importKey("raw",n.encode(o),"PBKDF2",!1,["deriveBits","deriveKey"])}function E(o,n){return window.crypto.subtle.deriveKey({name:"PBKDF2",salt:n,iterations:1e5,hash:"SHA-256"},o,{name:"AES-CBC",length:256},!0,["encrypt","decrypt"])}function U(){const o=C(),{encrypt:n}=o.value,a=Uint8Array.from(Object.values(n.iv)),s=Uint8Array.from(Object.values(n.salt));return{decrypt:async(i,u)=>{if(!i)return;const d=await S(i),p=await E(d,s),y=Uint8Array.from(u,e=>e.charCodeAt(0)),m=await window.crypto.subtle.decrypt({name:"AES-CBC",iv:a},p,y);return new TextDecoder().decode(m)}}}const P={key:0,"w-full":"","pt-14":"","pb-10":""},M={class:"decrypt-password-container w-full sm:w-1/2","flex-center":"","m-auto":"",relative:""},H={key:0,class:"-top-6",absolute:"","text-xs":"",op:"50"},I=["innerHTML"],N={key:1,class:"-bottom-6",absolute:"","text-xs":"",op:"50"},W={key:1},$=w({__name:"ValaxyDecrypt",props:{encryptedContent:{},hint:{}},setup(o){const n=o,a=v(""),s=v(""),i=v(!1),{decrypt:u}=U();async function d(){const e=n.encryptedContent;if(e)try{const t=await u(a.value,e);s.value=t||"",setTimeout(()=>{h()},16)}catch(t){i.value=!0,console.error(t)}}function p(){s.value="",a.value="",setTimeout(()=>{h()},16)}const y=w({name:"ValaxyDeprecatedContent",props:{html:String},render(){const e=`<div>${this.html}</div>`;return B({setup:()=>({frontmatter:x()}),template:e})}}),m=g(()=>location.protocol!=="https:");return(e,t)=>(c(),l("div",null,[s.value?(c(),l("div",W,[K(V(y),{html:s.value},null,8,["html"]),r("div",{"w-full":"","text-center":"","mt-8":""},[r("button",{"m-auto":"",class:"btn","font-bold":"",onClick:p}," Encrypt Again ")])])):(c(),l("div",P,[r("div",M,[k(r("input",{"onUpdate:modelValue":t[0]||(t[0]=f=>a.value=f),"w-full":"",border:"~ solid dark:dark-100","pl-5":"","pr-11":"","py-3":"","rounded-full":"","hover:shadow":"",transition:"",type:"password",placeholder:"Enter password",class:D(i.value&&"border-red"),onInput:t[1]||(t[1]=f=>i.value=!1),onKeyup:A(d,["enter"])},null,34),[[_,a.value]]),r("div",{class:"text-gray/70 hover:text-gray transition","cursor-pointer":"",absolute:"","text-2xl":"","i-ri-arrow-right-circle-line":"","right-3":"",onClick:d}),e.hint?(c(),l("div",H,[r("div",{innerHTML:e.hint},null,8,I)])):b("v-if",!0),m.value?(c(),l("div",N,t[2]||(t[2]=[r("a",{href:"https://developer.mozilla.org/en-US/docs/Web/API/Web_Crypto_API",target:"_blank"},[r("span",null,"Web Crypto API")],-1),T(" Only works in HTTPS ")]))):b("v-if",!0)])]))]))}});export{$ as _};
